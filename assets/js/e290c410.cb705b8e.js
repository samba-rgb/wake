"use strict";(globalThis.webpackChunkdocs_ui=globalThis.webpackChunkdocs_ui||[]).push([[971],{59(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"features/template-system","title":"Template System","description":"Wake includes a powerful template system for executing predefined diagnostic and maintenance tasks across multiple Kubernetes pods. Templates automate common operations like generating heap dumps, thread dumps, JFR recordings, and other diagnostic procedures with real-time monitoring and progress tracking.","source":"@site/docs/features/template-system.mdx","sourceDirName":"features","slug":"/features/template-system","permalink":"/docs/features/template-system","draft":false,"unlisted":false,"editUrl":"https://github.com/samba-rgb/wake/tree/main/docs-ui/docs/features/template-system.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Web View","permalink":"/docs/features/web-view"},"next":{"title":"Script Execution","permalink":"/docs/features/script-execution"}}');var s=t(4848),a=t(8453);const i={sidebar_position:3},l="Template System",o={},d=[{value:"Quick Start",id:"quick-start",level:2},{value:"Built-in Templates",id:"built-in-templates",level:2},{value:"Java Flight Recorder (JFR)",id:"java-flight-recorder-jfr",level:3},{value:"Heap Dump",id:"heap-dump",level:3},{value:"Thread Dump",id:"thread-dump",level:3},{value:"Interactive Template UI",id:"interactive-template-ui",level:2},{value:"Execution Monitoring",id:"execution-monitoring",level:3},{value:"File Management",id:"file-management",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Parallel Execution",id:"parallel-execution",level:3},{value:"Real-time Monitoring Integration",id:"real-time-monitoring-integration",level:3},{value:"Structured Output",id:"structured-output",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"Performance Troubleshooting",id:"performance-troubleshooting",level:3},{value:"Regular Health Checks",id:"regular-health-checks",level:3},{value:"Development and Testing",id:"development-and-testing",level:3},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"template-system",children:"Template System"})}),"\n",(0,s.jsx)(n.p,{children:"Wake includes a powerful template system for executing predefined diagnostic and maintenance tasks across multiple Kubernetes pods. Templates automate common operations like generating heap dumps, thread dumps, JFR recordings, and other diagnostic procedures with real-time monitoring and progress tracking."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Template System UI",src:t(9618).A+"",width:"1927",height:"986"})}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# List all available templates\nwake --list-templates\n\n# Execute JFR template on matching pods\nwake --exec-template jfr --template-args 1234 30s\n\n# Execute heap dump template on specific pods  \nwake --exec-template heap-dump --template-args 1234\n\n# Execute thread dump template\nwake --exec-template thread-dump --template-args 1234\n\n# Run template on specific namespace and pod pattern\nwake -n production --exec-template jfr --template-args 1234 60s api-*\n"})}),"\n",(0,s.jsx)(n.h2,{id:"built-in-templates",children:"Built-in Templates"}),"\n",(0,s.jsx)(n.h3,{id:"java-flight-recorder-jfr",children:"Java Flight Recorder (JFR)"}),"\n",(0,s.jsx)(n.p,{children:"Generate comprehensive performance profiles for Java applications:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# 30-second JFR recording for PID 1234\nwake --exec-template jfr --template-args 1234 30s\n\n# 2-minute JFR recording\nwake --exec-template jfr --template-args 1234 2m\n"})}),"\n",(0,s.jsx)(n.h3,{id:"heap-dump",children:"Heap Dump"}),"\n",(0,s.jsx)(n.p,{children:"Capture Java heap memory snapshots for memory analysis:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Generate heap dump for process with PID 1234\nwake --exec-template heap-dump --template-args 1234\n"})}),"\n",(0,s.jsx)(n.h3,{id:"thread-dump",children:"Thread Dump"}),"\n",(0,s.jsx)(n.p,{children:"Generate Java thread snapshots for deadlock and performance analysis:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Generate thread dump for process with PID 1234\nwake --exec-template thread-dump --template-args 1234\n"})}),"\n",(0,s.jsx)(n.h2,{id:"interactive-template-ui",children:"Interactive Template UI"}),"\n",(0,s.jsx)(n.p,{children:"The template system features a sophisticated real-time interactive UI that provides:"}),"\n",(0,s.jsx)(n.h3,{id:"execution-monitoring",children:"Execution Monitoring"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pod Execution Status"}),": Visual progress indicators for each pod"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Live Resource Monitoring"}),": CPU and memory usage updated every 2 seconds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Command Output Logs"}),": Detailed execution information and error handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time Progress"}),": Track template execution across multiple pods"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"file-management",children:"File Management"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automatic File Download"}),": Generated files are downloaded to your local machine"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"File Size Tracking"}),": Monitor download progress with file sizes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Smart Organization"}),": Files organized by namespace and pod name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cleanup Management"}),": Temporary files are cleaned up after successful download"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Detailed Diagnostics"}),": Clear failure messages with actionable information"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Partial Success"}),": Continue execution on other pods even if some fail"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Retry Logic"}),": Built-in retry mechanisms for transient failures"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,s.jsx)(n.h3,{id:"parallel-execution",children:"Parallel Execution"}),"\n",(0,s.jsx)(n.p,{children:"Templates run on multiple pods simultaneously:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Concurrent Processing"}),": Execute on all matching pods at once"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource Efficient"}),": Intelligent scheduling to avoid overwhelming clusters"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Scalable"}),": Handles hundreds of pods efficiently"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"real-time-monitoring-integration",children:"Real-time Monitoring Integration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Live CPU/Memory Tracking"}),": Monitor resource impact during template execution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance Correlation"}),": See how template execution affects pod performance"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource Usage Alerts"}),": Identify pods under stress during execution"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"structured-output",children:"Structured Output"}),"\n",(0,s.jsx)(n.p,{children:"Generated files are organized systematically:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"template_output_YYYYMMDD_HHMMSS/\n\u251c\u2500\u2500 namespace1/\n\u2502   \u251c\u2500\u2500 pod1_heap_dump.hprof\n\u2502   \u251c\u2500\u2500 pod2_heap_dump.hprof\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 namespace2/\n    \u251c\u2500\u2500 pod3_jfr_recording.jfr\n    \u2514\u2500\u2500 ...\n"})}),"\n",(0,s.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,s.jsx)(n.h3,{id:"performance-troubleshooting",children:"Performance Troubleshooting"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Capture JFR recordings during performance issues\nwake -n production --exec-template jfr --template-args $PID 60s\n\n# Generate heap dumps when memory usage is high\nwake -n production --exec-template heap-dump --template-args $PID\n"})}),"\n",(0,s.jsx)(n.h3,{id:"regular-health-checks",children:"Regular Health Checks"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Weekly performance profiling\nwake -n production api-* --exec-template jfr --template-args $PID 5m\n\n# Daily thread analysis\nwake -n production worker-* --exec-template thread-dump --template-args $PID\n"})}),"\n",(0,s.jsx)(n.h3,{id:"development-and-testing",children:"Development and Testing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Profile performance during load testing\nwake -n staging --exec-template jfr --template-args $PID 2m\n\n# Memory analysis during feature testing\nwake -n dev feature-* --exec-template heap-dump --template-args $PID\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Start Small"}),": Test templates on a few pods before running on large deployments"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Monitor Resources"}),": Watch CPU/memory impact during template execution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Time Appropriately"}),": Schedule intensive operations during low-traffic periods"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Organize Output"}),": Use consistent naming and directory structures"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Clean Up"}),": Regularly clean old diagnostic files to save disk space"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The template system is designed to be both powerful and safe, providing detailed visibility into execution progress while protecting your cluster resources."})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},9618(e,n,t){t.d(n,{A:()=>r});const r=t.p+"assets/images/template_running-d71c951b55bb79e3184c315858f0858a.png"},8453(e,n,t){t.d(n,{R:()=>i,x:()=>l});var r=t(6540);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);